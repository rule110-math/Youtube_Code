
Clear[f]
f[a_, {}] := a
f[a_, {x_, y___}] := If[a - x >= 0, {x, f[a - x, {x, y}]}, f[a, {y}]]
greedy[a_, m_] := f[a, m] // Flatten


greedy[1654, {500, 100, 20, 10, 5, 2, 1}]
{500, 500, 500, 100, 20, 20, 10, 2, 2, 0}
